///|
/// æµ‹è¯•å·¥å…·å‡½æ•°

///|
test "is_space function" {
  // æµ‹è¯•å¸¸è§ç©ºç™½ç¬¦
  assert_eq(is_space(' '), true)
  assert_eq(is_space('\t'), true)
  assert_eq(is_space('\n'), true)
  assert_eq(is_space('\r'), true)

  // æµ‹è¯•éç©ºç™½ç¬¦
  assert_eq(is_space('a'), false)
  assert_eq(is_space('1'), false)
  assert_eq(is_space('_'), false)
  assert_eq(is_space('$'), false)

  // æµ‹è¯• Unicode ç©ºç™½ç¬¦ï¼ˆä¸é—´æ–­ç©ºæ ¼ï¼‰
  assert_eq(is_space('\u{00A0}'), true)
}

///|
test "is_alphabetic function" {
  // æµ‹è¯•ä¸‹åˆ’çº¿å’Œç¾å…ƒç¬¦
  assert_eq(is_alphabetic('_'), true)
  assert_eq(is_alphabetic('$'), true)

  // æµ‹è¯• ASCII å­—æ¯
  assert_eq(is_alphabetic('a'), true)
  assert_eq(is_alphabetic('Z'), true)

  // æµ‹è¯• Unicode å­—æ¯
  assert_eq(is_alphabetic('Î±'), true) // å¸Œè…Šå­—æ¯
  assert_eq(is_alphabetic('å˜'), true) // ä¸­æ–‡å­—ç¬¦
  assert_eq(is_alphabetic('Ã©'), true) // å¸¦é‡éŸ³å­—æ¯

  // æµ‹è¯•éå­—æ¯
  assert_eq(is_alphabetic('1'), false)
  assert_eq(is_alphabetic(' '), false)
  assert_eq(is_alphabetic('-'), false)
  assert_eq(is_alphabetic('@'), false)
  assert_eq(is_alphabetic('ğŸ’¡'), false) // emoji
}

///|
test "is_alpha_numeric function" {
  // æµ‹è¯•å­—æ¯
  assert_eq(is_alpha_numeric('a'), true)
  assert_eq(is_alpha_numeric('_'), true)
  assert_eq(is_alpha_numeric('$'), true)
  assert_eq(is_alpha_numeric('å˜'), true)

  // æµ‹è¯•æ•°å­—
  assert_eq(is_alpha_numeric('0'), true)
  assert_eq(is_alpha_numeric('9'), true)

  // æµ‹è¯•éå­—æ¯æ•°å­—
  assert_eq(is_alpha_numeric(' '), false)
  assert_eq(is_alpha_numeric('-'), false)
  assert_eq(is_alpha_numeric('@'), false)
  assert_eq(is_alpha_numeric('ğŸ’¡'), false)
}

///|
test "is_valid_identifier function - valid cases" {
  // åˆæ³•æ ‡è¯†ç¬¦ç¤ºä¾‹
  assert_eq(is_valid_identifier("foo"), true)
  assert_eq(is_valid_identifier("_bar"), true)
  assert_eq(is_valid_identifier("$baz2"), true)
  assert_eq(is_valid_identifier("å˜é‡1"), true)
  assert_eq(is_valid_identifier("a"), true)
  assert_eq(is_valid_identifier("_"), true)
  assert_eq(is_valid_identifier("$"), true)
  assert_eq(is_valid_identifier("a1_b2$c3"), true)
}

///|
test "is_valid_identifier function - invalid cases" {
  // éæ³•æ ‡è¯†ç¬¦ç¤ºä¾‹
  assert_eq(is_valid_identifier(""), false) // ç©ºä¸²
  assert_eq(is_valid_identifier("1abc"), false) // é¦–å­—ç¬¦ä¸ºæ•°å­—
  assert_eq(is_valid_identifier("a-b"), false) // è¿å­—ç¬¦ä¸å…è®¸
  assert_eq(is_valid_identifier("a b"), false) // ç©ºç™½ä¸å…è®¸
  assert_eq(is_valid_identifier("ağŸ’¡"), false) // emoji éå­—æ¯æ•°å­—
  assert_eq(is_valid_identifier("@var"), false) // ç‰¹æ®Šå­—ç¬¦å¼€å¤´
  assert_eq(is_valid_identifier("a+b"), false) // è¿ç®—ç¬¦å­—ç¬¦
  assert_eq(is_valid_identifier("a.b"), false) // ç‚¹å·ä¸å…è®¸
}

///|
test "is_valid_identifier function - edge cases" {
  // è¾¹ç•Œæƒ…å†µ
  assert_eq(is_valid_identifier("_"), true)
  assert_eq(is_valid_identifier("$"), true)
  assert_eq(is_valid_identifier("a_"), true)
  assert_eq(is_valid_identifier("a$"), true)
  assert_eq(is_valid_identifier("_1"), true)
  assert_eq(is_valid_identifier("$1"), true)

  // åŒ…å«æ•°å­—çš„æ ‡è¯†ç¬¦
  assert_eq(is_valid_identifier("var123"), true)
  assert_eq(is_valid_identifier("123var"), false) // æ•°å­—å¼€å¤´

  // æ··åˆå­—ç¬¦
  assert_eq(is_valid_identifier("my_var_123$"), true)
  assert_eq(is_valid_identifier("my-var"), false) // è¿å­—ç¬¦
}

test "test char"{
  let source = "a ä¸­æ–‡ _123 $123 "
  assert_eq(source.get_char(2), Some('ä¸­'))
}